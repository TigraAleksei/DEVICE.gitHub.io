var link=document.querySelector(".writeus-popup"),popupDevice=document.querySelector(".write"),overlayDevice=document.querySelector(".modal-overlay"),close=popupDevice.querySelector(".close"),form=popupDevice.querySelector(".write-us-form"),userName=popupDevice.querySelector("[name=name-user]"),userMail=popupDevice.querySelector("[name=e-mail]"),userTextarea=popupDevice.querySelector("[name=write-letter]"),isStorageSupport=!0,storage="";try{storage=localStorage.getItem("userName"),storage=localStorage.getItem("userMail"),storage=localStorage.getItem("userTextarea")}catch(e){isStorageSupport=!1}link.addEventListener("click",function(e){e.preventDefault(),popupDevice.classList.add("modal-show"),overlayDevice.classList.add("modal-show-overlay"),storage?(userName.value=storage,userMail.value=storage,userTextarea.focus()):userName.focus()}),close.addEventListener("click",function(e){e.preventDefault(),popupDevice.classList.remove("modal-show"),overlayDevice.classList.remove("modal-show-overlay"),popupDevice.classList.remove("modal-error")}),form.addEventListener("submit",function(e){userMail.value&&userTextarea.value?isStorageSupport&&(localStorage.setItem("userName",userName.value),localStorage.setItem("userMail",userMail.value),localStorage.setItem("userTextarea",userTextarea.value)):(e.preventDefault(),popupDevice.classList.remove("modal-error"),popupDevice.offsetWidth=popupDevice.offsetWidth,popupDevice.classList.add("modal-error"),console.log("Нужно ввести ваши данные !"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),popupDevice.classList.contains("modal-show")&&(popupDevice.classList.remove("modal-show"),overlayDevice.classList.remove("modal-show-overlay"),popupDevice.classList.remove("modal-error")))});